<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Source Underground: Underrated Alternatives</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fafaf9; /* Stone-50 */
            color: #44403c; /* Stone-700 */
        }
        h1, h2, h3, h4 {
            font-family: 'Space Grotesk', sans-serif;
        }
        
        /* Chart Container Styling - Mandatory Requirements */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px; /* Constraint */
            margin-left: auto;
            margin-right: auto;
            height: 400px; /* Base height */
            max-height: 500px;
        }
        @media (max-width: 640px) {
            .chart-container {
                height: 300px;
            }
        }

        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .active-tab {
            background-color: #c2410c; /* Orange-700 */
            color: white;
        }
        .inactive-tab {
            background-color: #e7e5e4; /* Stone-200 */
            color: #44403c;
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #d6d3d1;
            border-radius: 4px;
        }
    </style>
</head>
<body class="bg-stone-50 min-h-screen flex flex-col">

    <!-- Header / Intro -->
    <header class="w-full bg-stone-900 text-stone-100 py-12 px-4 sm:px-6 lg:px-8 shadow-lg">
        <div class="max-w-7xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                <div>
                    <h1 class="text-4xl md:text-5xl font-bold tracking-tight text-orange-500">The Open Source Underground</h1>
                    <p class="mt-4 text-xl text-stone-300 max-w-2xl">
                        A curated report on high-utility, privacy-focused, and underrated open source alternatives to expensive proprietary software.
                        Dig deeper than the mainstream.
                    </p>
                </div>
                <div class="mt-6 md:mt-0 p-4 bg-stone-800 rounded-lg border border-stone-700 text-center">
                    <span class="block text-sm text-stone-400 uppercase tracking-wider">Report Focus</span>
                    <span class="block text-2xl font-bold text-white mt-1">Utility > Hype</span>
                </div>
            </div>
        </div>
    </header>

    <main class="flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-16">

        <!-- SECTION 1: The Hidden Gem Matrix -->
        <section id="matrix-section">
            <div class="mb-6">
                <h2 class="text-3xl font-bold text-stone-900 border-l-4 border-orange-600 pl-4">The "Hidden Gem" Matrix</h2>
                <p class="mt-4 text-lg text-stone-600 max-w-4xl">
                    We analyzed open source projects based on two dimensions: <strong>Popularity</strong> (GitHub Stars/Mentions) and <strong>Utility Scope</strong> (Feature completeness vs. Paid equivalents).
                    <br><br>
                    The "Sweet Spot" are tools in the top-left quadrant: <strong>High Utility, Low Hype</strong>. These are the tools that solve real problems without the noise.
                </p>
            </div>

            <!-- Chart Container -->
            <div class="bg-white p-4 rounded-xl shadow-sm border border-stone-200">
                <div class="chart-container">
                    <canvas id="gemMatrixChart"></canvas>
                </div>
                <div class="mt-4 text-center text-sm text-stone-500">
                    <span class="inline-block w-3 h-3 bg-orange-500 rounded-full mr-1"></span> High Utility / Low Hype (Underrated)
                    <span class="inline-block w-3 h-3 bg-stone-400 rounded-full ml-4 mr-1"></span> Established Standards
                </div>
            </div>
        </section>

        <!-- SECTION 2: The Toolbox Explorer -->
        <section id="toolbox-section">
            <div class="flex flex-col md:flex-row justify-between items-end mb-8 border-b border-stone-300 pb-4">
                <div class="mb-4 md:mb-0">
                    <h2 class="text-3xl font-bold text-stone-900 border-l-4 border-orange-600 pl-4">The Toolbox</h2>
                    <p class="mt-2 text-stone-600">Select a category to explore specific tools, their use cases, and deployment difficulty.</p>
                </div>
                
                <!-- Filter Tabs -->
                <div class="flex flex-wrap gap-2" id="filter-container">
                    <button class="filter-btn active-tab px-4 py-2 rounded-lg font-medium transition-colors" data-filter="all">All</button>
                    <button class="filter-btn inactive-tab px-4 py-2 rounded-lg font-medium transition-colors" data-filter="productivity">Productivity</button>
                    <button class="filter-btn inactive-tab px-4 py-2 rounded-lg font-medium transition-colors" data-filter="design">Creative</button>
                    <button class="filter-btn inactive-tab px-4 py-2 rounded-lg font-medium transition-colors" data-filter="sysadmin">SysAdmin/Utils</button>
                    <button class="filter-btn inactive-tab px-4 py-2 rounded-lg font-medium transition-colors" data-filter="finance">Finance</button>
                </div>
            </div>

            <!-- Tools Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="tools-grid">
                <!-- Content generated by JS -->
            </div>
        </section>

        <!-- SECTION 3: ROI Calculator -->
        <section class="bg-stone-100 rounded-2xl p-8 border border-stone-200">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <div>
                    <h2 class="text-3xl font-bold text-stone-900 border-l-4 border-orange-600 pl-4 mb-6">The Cost of Subscriptions</h2>
                    <p class="text-stone-600 mb-6">
                        Small monthly fees add up. Select the paid services you currently use to see how much you could save annually by switching to self-hosted or open-source local alternatives (assuming minimal hosting costs).
                    </p>
                    
                    <div class="space-y-3 bg-white p-6 rounded-xl shadow-sm" id="subscription-toggles">
                        <!-- Toggles generated by JS -->
                    </div>

                    <div class="mt-8 p-4 bg-orange-100 rounded-lg border border-orange-200">
                        <div class="text-sm font-semibold text-orange-800 uppercase">Potential Annual Savings</div>
                        <div class="text-4xl font-bold text-orange-700" id="total-savings">$0.00</div>
                    </div>
                </div>

                <div class="flex flex-col justify-center">
                    <div class="chart-container h-80">
                        <canvas id="savingsChart"></canvas>
                    </div>
                    <p class="text-center text-xs text-stone-500 mt-4">
                        *Estimates based on standard individual plan pricing for major SaaS providers.
                    </p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-stone-900 text-stone-400 py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p>&copy; 2025 Open Source Discovery Report. Generated for educational purposes.</p>
            <p class="text-xs mt-2">No SVG graphics were harmed in the making of this single-file application.</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- DATA STORE ---
        const toolsData = [
            {
                id: 'stirling',
                name: 'Stirling-PDF',
                category: 'sysadmin',
                replaces: 'Adobe Acrobat Pro',
                description: 'A robust, privacy-first PDF manipulation tool. Merge, split, rotate, move pages, and convert types.',
                underratedScore: 95, // Y-axis
                popularity: 30, // X-axis (Synthesized relative scale)
                difficulty: 'Low (Docker)',
                tech: 'Java / Spring Boot',
                icon: 'ðŸ“„',
                features: ['OCR', 'Merge/Split', 'Watermark', 'No Analytics']
            },
            {
                id: 'actual',
                name: 'Actual Budget',
                category: 'finance',
                replaces: 'YNAB / Mint',
                description: 'A local-first personal finance system. Zero-envelope budgeting with optional bank syncing via GoCardless.',
                underratedScore: 90,
                popularity: 45,
                difficulty: 'Medium',
                tech: 'Node.js / React',
                icon: 'ðŸ’°',
                features: ['Envelope Budgeting', 'Local First', 'E2E Encryption', 'Multi-device']
            },
            {
                id: 'penpot',
                name: 'Penpot',
                category: 'design',
                replaces: 'Figma',
                description: ' The first open-source design and prototyping platform meant for cross-domain teams. SVG based.',
                underratedScore: 85,
                popularity: 70,
                difficulty: 'Medium',
                tech: 'Clojure / Web',
                icon: 'ðŸŽ¨',
                features: ['Prototyping', 'Vector Editing', 'Collaboration', 'Open Standards']
            },
            {
                id: 'paperless',
                name: 'Paperless-ngx',
                category: 'productivity',
                replaces: 'Physical Cabinets / Evernote',
                description: 'Scan, index, and archive all your physical documents. Uses OCR to make everything searchable.',
                underratedScore: 98,
                popularity: 60,
                difficulty: 'Medium',
                tech: 'Python / Django',
                icon: 'ðŸ—„ï¸',
                features: ['OCR', 'Auto-tagging', 'Full Text Search', 'Multi-user']
            },
            {
                id: 'cyberchef',
                name: 'CyberChef',
                category: 'sysadmin',
                replaces: 'Online Decoders',
                description: 'The "Cyber Swiss Army Knife". A web app for encryption, encoding, compression, and data analysis.',
                underratedScore: 88,
                popularity: 80, // Well known in security, underrated generally
                difficulty: 'Low (Static HTML)',
                tech: 'JavaScript',
                icon: 'ðŸ”ª',
                features: ['Base64', 'Hex Dump', 'Encryption', 'Pipeline Logic']
            },
            {
                id: 'immich',
                name: 'Immich',
                category: 'productivity',
                replaces: 'Google Photos',
                description: 'High performance self-hosted photo and video management solution. Scary good UI match for G-Photos.',
                underratedScore: 92,
                popularity: 65,
                difficulty: 'Medium (Docker)',
                tech: 'Dart / Flutter',
                icon: 'ðŸ“¸',
                features: ['Auto Backup', 'Facial Recognition', 'Map View', 'Shared Albums']
            },
            {
                id: 'hoppscotch',
                name: 'Hoppscotch',
                category: 'sysadmin',
                replaces: 'Postman',
                description: 'Open source API development ecosystem. Lightweight, fast, and beautiful UI for testing APIs.',
                underratedScore: 80,
                popularity: 75,
                difficulty: 'Low',
                tech: 'Vue.js',
                icon: 'ðŸ”Œ',
                features: ['REST/GraphQL', 'Real-time', 'PWA', 'Teams']
            },
            {
                id: 'kdenlive',
                name: 'Kdenlive',
                category: 'design',
                replaces: 'Premiere Pro',
                description: 'Non-linear video editor. Much more powerful than people realize for cutting, effects, and compositing.',
                underratedScore: 75,
                popularity: 50,
                difficulty: 'Medium',
                tech: 'C++ / Qt',
                icon: 'ðŸŽ¬',
                features: ['Multi-track', 'Proxy Editing', 'Keyframes', 'Hardware Accel']
            },
            {
                id: 'n8n',
                name: 'n8n',
                category: 'productivity',
                replaces: 'Zapier / Make',
                description: 'Workflow automation tool. Fair-code distribution. Visually build complex automations between apps.',
                underratedScore: 88,
                popularity: 70,
                difficulty: 'Medium',
                tech: 'TypeScript',
                icon: 'ðŸ¤–',
                features: ['Visual Editor', 'Self-Hosted', 'Webhooks', 'Complex Logic']
            }
        ];

        const subscriptionData = [
            { name: 'Adobe Creative Cloud', cost: 55, replaceWith: 'Penpot / Kdenlive / Inkscape' },
            { name: 'Notion / Evernote', cost: 15, replaceWith: 'AppFlowy / Paperless-ngx' },
            { name: 'Google Workspace (Storage)', cost: 10, replaceWith: 'Nextcloud / Immich' },
            { name: 'YNAB (Budgeting)', cost: 12, replaceWith: 'Actual Budget' },
            { name: 'Zapier (Automation)', cost: 30, replaceWith: 'n8n' },
            { name: 'DocuSign / Acrobat', cost: 20, replaceWith: 'Stirling-PDF' }
        ];

        // --- STATE MANAGEMENT ---
        let currentFilter = 'all';
        let selectedSubscriptions = new Set();
        let charts = {};

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            renderMatrixChart();
            renderToolsGrid();
            renderCalculator();
            setupEventListeners();
        });

        // --- EVENT LISTENERS ---
        function setupEventListeners() {
            // Filter Tabs
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    // Update UI
                    document.querySelectorAll('.filter-btn').forEach(b => {
                        b.classList.remove('active-tab');
                        b.classList.add('inactive-tab');
                    });
                    e.target.classList.remove('inactive-tab');
                    e.target.classList.add('active-tab');

                    // Update State & Grid
                    currentFilter = e.target.dataset.filter;
                    renderToolsGrid();
                });
            });
        }

        // --- SECTION 1: MATRIX CHART RENDERER ---
        function renderMatrixChart() {
            const ctx = document.getElementById('gemMatrixChart').getContext('2d');
            
            // Map data to chart format
            const dataPoints = toolsData.map(tool => ({
                x: tool.popularity,
                y: tool.underratedScore,
                toolName: tool.name,
                category: tool.category
            }));

            charts.matrix = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Open Source Tools',
                        data: dataPoints,
                        backgroundColor: (ctx) => {
                            const val = ctx.raw?.y;
                            // Orange for high underrated score, Stone for lower
                            return val > 85 ? '#ea580c' : '#78716c';
                        },
                        pointRadius: 8,
                        pointHoverRadius: 12
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: { display: true, text: 'Popularity / Awareness (Relative)' },
                            min: 0,
                            max: 100,
                            grid: { color: '#e7e5e4' }
                        },
                        y: {
                            title: { display: true, text: 'Underrated / Utility Score' },
                            min: 50,
                            max: 100,
                            grid: { color: '#e7e5e4' }
                        }
                    },
                    plugins: {
                        tooltip: {
                            backgroundColor: '#1c1917',
                            titleFont: { family: 'Space Grotesk', size: 14 },
                            bodyFont: { family: 'Inter' },
                            callbacks: {
                                label: function(context) {
                                    return context.raw.toolName;
                                }
                            }
                        },
                        legend: { display: false }
                    }
                }
            });
        }

        // --- SECTION 2: TOOLS GRID RENDERER ---
        function renderToolsGrid() {
            const grid = document.getElementById('tools-grid');
            grid.innerHTML = ''; // Clear

            const filteredData = currentFilter === 'all' 
                ? toolsData 
                : toolsData.filter(t => t.category === currentFilter);

            filteredData.forEach(tool => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-xl p-6 shadow-sm border border-stone-200 card-hover flex flex-col justify-between h-full';
                
                // Difficulty Badge Color
                let badgeColor = 'bg-green-100 text-green-800';
                if(tool.difficulty.includes('Medium')) badgeColor = 'bg-yellow-100 text-yellow-800';
                if(tool.difficulty.includes('High')) badgeColor = 'bg-red-100 text-red-800';

                card.innerHTML = `
                    <div>
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="text-3xl">${tool.icon}</div>
                                <div>
                                    <h3 class="text-xl font-bold text-stone-900">${tool.name}</h3>
                                    <span class="text-xs font-semibold text-stone-500 uppercase tracking-wide">Replaces ${tool.replaces}</span>
                                </div>
                            </div>
                            <span class="px-2 py-1 rounded text-xs font-bold ${badgeColor}">${tool.difficulty}</span>
                        </div>
                        <p class="text-stone-600 text-sm mb-4 leading-relaxed">
                            ${tool.description}
                        </p>
                        <div class="mb-4">
                            <h4 class="text-xs font-bold text-stone-400 uppercase mb-2">Tech Stack</h4>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-2 py-1 bg-stone-100 text-stone-600 text-xs rounded border border-stone-200">${tool.tech}</span>
                                ${tool.features.slice(0,2).map(f => `<span class="px-2 py-1 bg-stone-100 text-stone-600 text-xs rounded border border-stone-200">${f}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                    <div class="pt-4 border-t border-stone-100 mt-2">
                        <div class="flex justify-between items-center text-sm">
                            <span class="text-orange-600 font-semibold">Utility Score: ${tool.underratedScore}/100</span>
                            <button onclick="alert('In a real app, this would link to: github.com/topics/${tool.id}')" class="text-stone-400 hover:text-stone-900 transition-colors font-medium">View Repo &rarr;</button>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // --- SECTION 3: CALCULATOR LOGIC ---
        function renderCalculator() {
            const container = document.getElementById('subscription-toggles');
            
            // Generate Toggles
            subscriptionData.forEach((sub, index) => {
                const row = document.createElement('div');
                row.className = 'flex items-center justify-between p-2 hover:bg-stone-50 rounded transition-colors cursor-pointer';
                row.innerHTML = `
                    <label class="flex items-center space-x-3 cursor-pointer select-none flex-grow">
                        <input type="checkbox" class="form-checkbox h-5 w-5 text-orange-600 rounded border-stone-300 focus:ring-orange-500" 
                            data-cost="${sub.cost}" onchange="updateSavings()">
                        <div class="flex flex-col">
                            <span class="font-medium text-stone-800">${sub.name}</span>
                            <span class="text-xs text-stone-500">Replaced by ${sub.replaceWith}</span>
                        </div>
                    </label>
                    <span class="font-bold text-stone-600">$${sub.cost}/mo</span>
                `;
                container.appendChild(row);
            });

            // Initialize Chart
            const ctx = document.getElementById('savingsChart').getContext('2d');
            charts.savings = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Monthly Cost', 'Yearly Savings'],
                    datasets: [{
                        label: 'Financial Impact',
                        data: [0, 0],
                        backgroundColor: ['#78716c', '#ea580c'],
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { 
                            beginAtZero: true,
                            grid: { display: false }
                        },
                        x: {
                            grid: { display: false }
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        function updateSavings() {
            let monthlyCost = 0;
            const checkboxes = document.querySelectorAll('#subscription-toggles input[type="checkbox"]');
            
            checkboxes.forEach(cb => {
                if (cb.checked) {
                    monthlyCost += parseFloat(cb.dataset.cost);
                }
            });

            const yearlySavings = monthlyCost * 12;

            // Update Text
            document.getElementById('total-savings').textContent = `$${yearlySavings.toFixed(2)}`;

            // Update Chart
            charts.savings.data.datasets[0].data = [monthlyCost, yearlySavings];
            charts.savings.update();
        }

    </script>
</body>
</html>